<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <title>Waves Presale</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
</head>

<body onload="loadInfo()">
    <div style="border: ridge; width: 50%; margin:0 auto;">
        <div class="title">
            Number of sales
        </div>
        <div id="numberOfSales" class="value"></div>
        <div class="title">
            Number of tokens
        </div>
        <div id="numberOfTokens" class="value"></div>
        <div class="title">Sale information</div>
        <form>
            Enter the number of sale to get detailed information:<br>
            <input type="text" id="numberOfSale" value="0">
            <input type="button" onclick="get_sale()" value="Get info">
        </form>
        <div style="padding-left: 10pt">Transaction Id:</div>
        <div class="hash">None</div>
        <div style="padding-left: 10pt" id="amount">Amount: None</div>
        <div style="padding-left: 10pt" id="date">Date: None</div>
    </div>
<script>
    function loadInfo() {
        $.get( "get_info/", function( data ) {
             if (data.status == "OK") {
                 $("#numberOfSales").html(data.numberOfSales);
                 $("#numberOfTokens").html(data.totalTokens);
             } else {
                  $("#info").html("Sorry, something went wrong. Try to reload the page.")
             }
        });
        get_sale();
    }

    function get_sale() {
        var numberOfSale = $('#numberOfSale').val();
        $.get( "get_sale/?id=" + numberOfSale, function(data) {
             if (data.status == "OK") {
                 $(".hash").html(data.tx_id);
                 $("#amount").html("Amount: " + data.amount);
                 $("#date").html("Date: " + data.date);
             }
        });

    }
</script>
</body>
</html>